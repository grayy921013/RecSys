{% extends 'base.html' %}
{% load staticfiles %}

{% block head %}

    <title>Loud Ninja</title>

    <!-- Custom styles for this template -->
    <link href="{% static 'css/base.css' %}" rel="stylesheet">
    <link href="{% static 'css/label.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">

{% endblock %}


{% block nav %}
    <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a href="#" class="navbar-back">
            <span class="glyphicon glyphicon-arrow-left nav-glyphicon"
                                              aria-hidden="true">
            </span></a>
        <a href="{% url 'home' %}" class="navbar-brand">Abra</a>

        <div id="container-progress" class="navbar-left">
            <div class="progress label-progress">
                <div class="progress-bar progress-bar-info label-progress-content" role="progressbar" aria-valuenow="50"
                     aria-valuemin="0" aria-valuemax="100" style="width:50%" id="label-progress">
                </div>
            </div>
        </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
        <div class="nav navbar-right">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a type="button" class="" href="/">
                        <p class="nav-goal"></p>
                    </a>
                </li>

                <li>
                    <a type="button" href="{% url 'home' %}" class="btn btn-default btn-md btn-icon-left"><span
                            class="glyphicon glyphicon-home nav-glyphicon" aria-hidden="true"></span>
                    </a>
                </li>
                <li>
                    <a type="button" href="{% url 'profile' %}" class="btn btn-default btn-md btn-icon-left"><span
                            class="glyphicon glyphicon-user nav-glyphicon" aria-hidden="true"></span>
                    </a>
                </li>
                <li>
                    <a id="nav_help_button" type="button" class="btn btn-default btn-md btn-icon-left" data-toggle="modal" data-target="#helpModal">
                        <span class="glyphicon nav-glyphicon glyphicon-question-sign" aria-hidden="true"></span>
                    </a>
                </li>
                <li>
                    <a type="button" class="btn btn-default btn-md btn-icon-right" href="{% url 'userlogout' %}"><span
                            class="glyphicon glyphicon-log-out nav-glyphicon" aria-hidden="true"></span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
{% endblock %}

{% block content %}

    {% load static %}

    <div>

        <div class="col-md-3 sidebar profile-container">
            <h4 style="text-align: center;">{{ movie.title }} ({{ movie.year }})</h4>
            <div class="movie-poster">
                <a class="target-movie-holder" id="{{ movie.id }}">
                    {% with id=movie.movielens_id|stringformat:"i" %}
                        <img src="


                                {% with 'posters/'|add:id|add:'.jpg' as image_static %}{% static image_static %}{% endwith %}"
                             style="height: 206px; width: 144px" alt="Mountain View"
                             class="noresize img-responsive centerBlock">
                    {% endwith %}
                </a>
            </div>
            <div class="movie-info">
                <ul id="movie-info-list">
                    <li>
                        <b>Plot:</b>
                        {% if movie.full_plot %}
                            {{ movie.full_plot }}
                        {% else %}
                            {{ movie.plot }}
                        {% endif %}
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-md-9 col-md-offset-3 similar-main">
            <h4 class="label-instruction">Are these Movies <b>Similar</b> to {{ movie.title }}
                ({{ movie.year }}) ?</h4>
            <div class="alert alert-info label-info" role="alert">
                <span class="glyphicon  glyphicon-remove" aria-hidden="true"></span>
                - Not similar to this movie
                <b style="margin-left: 10px;">Not Sure</b>
                - I don't know this movie
                <span class="glyphicon  glyphicon-ok" aria-hidden="true" style="margin-left: 10px;"></span>
                - Similar to this movie
            </div>

            {% load static %}
            {% for similar_movie in similar_list %}
                <div id="div{{ similar_movie.imdb_id }}" class="col-sm-6 col-md-4 col-lg-3 col movie-item">
                    <a class="popoverData" href="#" data-content="{{ movie.title }}" rel="popover" data-placement="top"
                       data-trigger="hover">
                        <div class="movie-title movie-line" id="{{ movie.movielens_id }}-title">{{ movie.title }}</div>
                    </a>
                    <div class="movie-year movie-line" id="{{ movie.movielens_id }}-year">({{ movie.year }})</div>
                    <div class="movie-container">
                        <img src=""
                             style="height: 206px; width: 144px" alt=""
                             class="noresize img-responsive centerBlock"/>
                        <div class="movie-overlay">
                            <p class="movie-hover-text">{{ movie.plot }}</p>
                        </div>

                        <div class="helper-container">
                            <button class="btn-show glyphicon glyphicon-comment btn-label"></button>
                        </div>
                    </div>

                    <div class="btn-group label-bar">
                        <button class="btn-no btn-label">
                            <span class="glyphicon  glyphicon-remove" aria-hidden="true"></span>
                        </button>
                        <button class="btn-skip btn-label">
                            Not Sure
                        </button>
                        <button class="btn-yes btn-label">
                            <span class="glyphicon  glyphicon-ok" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
            {% endfor %}
            <div id="wrap"></div>
            <br>
        </div>
    </div> <!-- /container -->
    <div class="mask-holder">
        <div class="congrats">
            <h1 class="congrats-title">Congratulations!</h1>
        </div>
        <button class="btn btn-primary btn-mask-next" onclick="location.href = '/';"> Next!</button>
    </div>
{% endblock %}

{% block helpModal %}
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Label Movies Similar to the Movie you chose...</h4>
    </div>
    <div class="modal-body help-body">
        <img id="img_1" class="modal-image" src="{% static 'images/large_screen/label_help_1.png' %}">
        <img id="img_2" class="modal-image" src="{% static 'images/large_screen/label_help_2.png' %}">
        <img id="img_3" class="modal-image" src="{% static 'images/large_screen/label_help_3.png' %}">
        <img id="img_4" class="modal-image" src="{% static 'images/large_screen/label_help_4.png' %}">
    </div>
    <div class="modal-footer">
        <button id="show_prev" type="button" class="btn btn-primary btn-left">Previous</button>
        <button id="show_next" type="button" class="btn btn-primary">Next</button>
    </div>
{% endblock %}

{% block mobileHelpModal %}
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Click the Movie you are familiar with...</h4>
    </div>
    <div class="modal-body help-body">
        <img id="img_1" class="modal-image" src="{% static 'images/small_screen/label_help_1.png' %}">
        <img id="img_2" class="modal-image" src="{% static 'images/small_screen/label_help_2.png' %}">
        <img id="img_3" class="modal-image" src="{% static 'images/small_screen/label_help_3.png' %}">
        <img id="img_4" class="modal-image" src="{% static 'images/small_screen/label_help_4.png' %}">
    </div>
    <div class="modal-footer">
        <button id="show_prev" type="button" class="btn btn-primary btn-left">Previous</button>
        <button id="show_next" type="button" class="btn btn-primary">Next</button>
    </div>
{% endblock %}

{% block script %}
    <script src="{% static 'js/TweenMax.min.js' %}"></script>
    <script src="{% static 'js/underscore-min.js' %}"></script>
    <script src="{% static 'js/label.js' %}"></script>
{% endblock %}

{% block navbarleft %}
    <div id="container-progress" class="navbar-left">
        <p id="label-progress">Progress:</p>
        <div class="progress">
            <div class="progress-bar" id="label-progress-bar" role="progressbar" style="width: 0%"
                 aria-valuenow="0" aria-valuemin="0"
                 aria-valuemax="100"></div>
        </div>
    </div>
{% endblock %}
